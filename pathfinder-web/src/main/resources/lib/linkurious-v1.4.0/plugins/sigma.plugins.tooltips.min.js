(function(){"use strict";function a(a,c,d){function e(a){a.preventDefault()}function f(){i&&i.parentNode&&(i.parentNode.removeChild(i),i=null)}function g(){clearTimeout(j),clearTimeout(k),j=!1,k=!1,f()}function h(a){clearTimeout(j),clearTimeout(k),j=!1,k=setTimeout(function(){p||f()},a)}var i,j,k,l=this,m=sigma.utils.extend(d.stage,b.stage),n=sigma.utils.extend(d.node,b.node),o=sigma.utils.extend(d.edge,b.edge),p=!1,q=!1;if(sigma.classes.dispatcher.extend(this),a.bind("kill",function(){sigma.plugins.killTooltips(a)}),this.open=function(b,d,e,g,h){if(f(),i=document.createElement("div"),d.renderer){var j,k,l,m=Object.create(null);for(l in b)m[l]=b[l];if(j=d.renderer.call(a.graph,m,d.template),k=typeof j,"undefined"===k)return;"string"===k?i.innerHTML=j:i.appendChild(j)}else i.innerHTML=d.template;var n=window.getComputedStyle(c.container).position;if("static"!==n){i.style.position="absolute";var o=c.container.getBoundingClientRect();e=~~(e-o.left),g=~~(g-o.top)}i.className=d.cssClass,"css"!==d.position&&("static"===n&&(i.style.position="absolute"),i.style.left=e+"px",i.style.top=g+"px"),i.addEventListener("mouseenter",function(){p=!0},!1),i.addEventListener("mouseleave",function(){p=!1},!1),setTimeout(function(){if(i){c.container.appendChild(i);var a=document.body.getBoundingClientRect(),b=i.getBoundingClientRect(),f=b.top-a.top,j=a.bottom-b.bottom,k=b.left-a.left,l=a.right-b.right;"top"===d.position?(i.className=d.cssClass+" top",i.style.left=e-b.width/2+"px",i.style.top=g-b.height+"px"):"bottom"===d.position?(i.className=d.cssClass+" bottom",i.style.left=e-b.width/2+"px",i.style.top=g+"px"):"left"===d.position?(i.className=d.cssClass+" left",i.style.left=e-b.width+"px",i.style.top=g-b.height/2+"px"):"right"===d.position&&(i.className=d.cssClass+" right",i.style.left=e+"px",i.style.top=g-b.height/2+"px"),d.autoadjust&&(b=i.getBoundingClientRect(),f=b.top-a.top,j=a.bottom-b.bottom,k=b.left-a.left,l=a.right-b.right,0>j?(i.className=d.cssClass,("top"===d.position||"bottom"===d.position)&&(i.className=d.cssClass+" top"),i.style.top=g-b.height+"px"):0>f&&(i.className=d.cssClass,("top"===d.position||"bottom"===d.position)&&(i.className=d.cssClass+" bottom"),i.style.top=g+"px"),0>l?(i.className=d.cssClass,("left"===d.position||"right"===d.position)&&(i.className=d.cssClass+" left"),i.style.left=e-b.width+"px"):0>k&&(i.className=d.cssClass,("left"===d.position||"right"===d.position)&&(i.className=d.cssClass+" right"),i.style.left=e+"px")),h&&h()}},0)},this.close=function(){return g(),this.dispatchEvent("hidden"),this},this.kill=function(){this.unbindEvents(),clearTimeout(j),clearTimeout(k),i=null,j=null,k=null,q=!1},this.unbindEvents=function(){d.stage&&(a.unbind(m.show),a.unbind(m.hide),"doubleClickStage"!==m.show&&a.unbind("doubleClickStage")),d.node&&(a.unbind(n.show),a.unbind(n.hide),"doubleClickNode"!==n.show&&a.unbind("doubleClickNode")),d.edge&&(a.unbind(o.show),a.unbind(o.hide),"doubleClickEdge"!==o.show&&a.unbind("doubleClickEdge")),("rightClickNode"===n.show||"rightClickEdge"===o.show)&&c.container.removeEventListener("contextmenu",e)},d.stage){if(void 0!==d.stage.renderer&&"function"!=typeof d.stage.renderer)throw new TypeError('"options.stage.renderer" is not a function, was '+d.stage.renderer);if(void 0!==d.stage.position&&"top"!==d.stage.position&&"bottom"!==d.stage.position&&"left"!==d.stage.position&&"right"!==d.stage.position&&"css"!==d.stage.position)throw new Error('"options.position" is not "top", "bottom", "left", "right", or "css", was '+d.position);a.bind(m.show,function(a){if("doubleClickStage"===m.show||!q){var b=a.data.captor.clientX,c=a.data.captor.clientY;clearTimeout(j),j=setTimeout(function(){l.open(null,m,b,c,l.dispatchEvent.bind(l,"shown",a.data))},m.delay)}}),a.bind(m.hide,function(a){var c=i;h(b.stage.hideDelay),c&&l.dispatchEvent("hidden",a.data)}),"doubleClickStage"!==m.show&&a.bind("doubleClickStage",function(a){g(),q=!0,l.dispatchEvent("hidden",a.data),setTimeout(function(){q=!1},b.doubleClickDelay)})}if(d.node){if(void 0!==d.node.renderer&&"function"!=typeof d.node.renderer)throw new TypeError('"options.node.renderer" is not a function, was '+d.node.renderer);if(void 0!==d.node.position&&"top"!==d.node.position&&"bottom"!==d.node.position&&"left"!==d.node.position&&"right"!==d.node.position&&"css"!==d.node.position)throw new Error('"options.position" is not "top", "bottom", "left", "right", or "css", was '+d.position);a.bind(n.show,function(a){if("doubleClickNode"===n.show||!q){var b=a.data.node;if(!b&&a.data.enter&&(b=a.data.enter.nodes[0]),void 0!=b){var c=a.data.captor.clientX,d=a.data.captor.clientY;clearTimeout(j),j=setTimeout(function(){l.open(b,n,c,d,l.dispatchEvent.bind(l,"shown",a.data))},n.delay)}}}),a.bind(n.hide,function(a){if(!a.data.leave||0!=a.data.leave.nodes.length){var c=i;h(b.node.hideDelay),c&&l.dispatchEvent("hidden",a.data)}}),"doubleClickNode"!==n.show&&a.bind("doubleClickNode",function(a){g(),q=!0,l.dispatchEvent("hidden",a.data),setTimeout(function(){q=!1},b.doubleClickDelay)})}if(d.edge){if(void 0!==d.edge.renderer&&"function"!=typeof d.edge.renderer)throw new TypeError('"options.edge.renderer" is not a function, was '+d.edge.renderer);if(void 0!==d.edge.position&&"top"!==d.edge.position&&"bottom"!==d.edge.position&&"left"!==d.edge.position&&"right"!==d.edge.position&&"css"!==d.edge.position)throw new Error('"options.position" is not "top", "bottom", "left", "right", or "css", was '+d.position);a.bind(o.show,function(a){if("doubleClickEdge"===o.show||!q){var b=a.data.edge;if(!b&&a.data.enter&&(b=a.data.enter.edges[0]),void 0!=b){var c=a.data.captor.clientX,d=a.data.captor.clientY;clearTimeout(j),j=setTimeout(function(){l.open(b,o,c,d,l.dispatchEvent.bind(l,"shown",a.data))},o.delay)}}}),a.bind(o.hide,function(a){if(!a.data.leave||0!=a.data.leave.edges.length){var c=i;h(b.edge.hideDelay),c&&l.dispatchEvent("hidden",a.data)}}),"doubleClickEdge"!==o.show&&a.bind("doubleClickEdge",function(a){g(),q=!0,l.dispatchEvent("hidden",a.data),setTimeout(function(){q=!1},b.doubleClickDelay)})}("rightClickNode"===n.show||"rightClickEdge"===o.show)&&c.container.addEventListener("contextmenu",e)}if("undefined"==typeof sigma)throw new Error("sigma is not declared");sigma.utils.pkg("sigma.plugins");var b={stage:{show:"rightClickStage",hide:"clickStage",cssClass:"sigma-tooltip",position:"",autoadjust:!1,delay:0,hideDelay:0,template:"",renderer:null},node:{show:"clickNode",hide:"clickStage",cssClass:"sigma-tooltip",position:"",autoadjust:!1,delay:0,hideDelay:0,template:"",renderer:null},edge:{show:"clickEdge",hide:"clickStage",cssClass:"sigma-tooltip",position:"",autoadjust:!1,delay:0,hideDelay:0,template:"",renderer:null},doubleClickDelay:800},c={};sigma.plugins.tooltips=function(b,d,e){return c[b.id]||(c[b.id]=new a(b,d,e)),c[b.id]},sigma.plugins.killTooltips=function(b){c[b.id]instanceof a&&c[b.id].kill(),delete c[b.id]}}).call(window);
//# sourceMappingURL=sigma.plugins.tooltips.min.js.map