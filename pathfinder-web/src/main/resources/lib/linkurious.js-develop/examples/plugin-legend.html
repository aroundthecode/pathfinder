<head><meta charset="UTF-8"></head>

<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
<!-- START SIGMA IMPORTS -->
<script src="../src/sigma.core.js"></script>
<script src="../src/conrad.js"></script>
<script src="../src/utils/sigma.utils.js"></script>
<script src="../src/utils/sigma.polyfills.js"></script>
<script src="../src/sigma.settings.js"></script>
<script src="../src/classes/sigma.classes.dispatcher.js"></script>
<script src="../src/classes/sigma.classes.configurable.js"></script>
<script src="../src/classes/sigma.classes.graph.js"></script>
<script src="../src/classes/sigma.classes.camera.js"></script>
<script src="../src/classes/sigma.classes.quad.js"></script>
<script src="../src/captors/sigma.captors.mouse.js"></script>
<script src="../src/captors/sigma.captors.touch.js"></script>
<script src="../src/renderers/sigma.renderers.canvas.js"></script>
<script src="../src/renderers/sigma.renderers.webgl.js"></script>
<script src="../src/renderers/sigma.renderers.svg.js"></script>
<script src="../src/renderers/sigma.renderers.def.js"></script>
<script src="../src/renderers/webgl/sigma.webgl.nodes.def.js"></script>
<script src="../src/renderers/webgl/sigma.webgl.nodes.fast.js"></script>
<script src="../src/renderers/webgl/sigma.webgl.edges.def.js"></script>
<script src="../src/renderers/webgl/sigma.webgl.edges.fast.js"></script>
<script src="../src/renderers/webgl/sigma.webgl.edges.arrow.js"></script>
<script src="../src/renderers/canvas/sigma.canvas.labels.def.js"></script>
<script src="../src/renderers/canvas/sigma.canvas.hovers.def.js"></script>
<script src="../src/renderers/canvas/sigma.canvas.nodes.def.js"></script>
<script src="../src/renderers/canvas/sigma.canvas.edges.def.js"></script>
<script src="../src/renderers/canvas/sigma.canvas.edges.curve.js"></script>
<script src="../src/renderers/canvas/sigma.canvas.edges.arrow.js"></script>
<script src="../src/renderers/canvas/sigma.canvas.edges.curvedArrow.js"></script>
<script src="../src/renderers/canvas/sigma.canvas.edgehovers.def.js"></script>
<script src="../src/renderers/canvas/sigma.canvas.edgehovers.curve.js"></script>
<script src="../src/renderers/canvas/sigma.canvas.edgehovers.arrow.js"></script>
<script src="../src/renderers/canvas/sigma.canvas.edgehovers.curvedArrow.js"></script>
<script src="../src/renderers/canvas/sigma.canvas.extremities.def.js"></script>
<script src="../src/renderers/svg/sigma.svg.utils.js"></script>
<script src="../src/renderers/svg/sigma.svg.nodes.def.js"></script>
<script src="../src/renderers/svg/sigma.svg.edges.def.js"></script>
<script src="../src/renderers/svg/sigma.svg.edges.curve.js"></script>
<script src="../src/renderers/svg/sigma.svg.edges.curvedArrow.js"></script>
<script src="../src/renderers/svg/sigma.svg.labels.def.js"></script>
<script src="../src/renderers/svg/sigma.svg.hovers.def.js"></script>
<script src="../src/middlewares/sigma.middlewares.rescale.js"></script>
<script src="../src/middlewares/sigma.middlewares.copy.js"></script>
<script src="../src/misc/sigma.misc.animation.js"></script>
<script src="../src/misc/sigma.misc.bindEvents.js"></script>
<script src="../src/misc/sigma.misc.bindDOMEvents.js"></script>
<script src="../src/misc/sigma.misc.drawHovers.js"></script>
<!-- END SIGMA IMPORTS -->

<script src="../plugins/sigma.plugins.colorbrewer/sigma.plugins.colorbrewer.js"></script>
<script src="../plugins/sigma.plugins.design/sigma.plugins.design.js"></script>
<script src="../plugins/sigma.plugins.legend/settings.js"></script>
<script src="../plugins/sigma.plugins.legend/sigma.plugins.legend.js"></script>
<script src="../plugins/sigma.exporters.image/sigma.exporters.image.js"></script>

<script src="../plugins/sigma.renderers.linkurious/settings.js"></script>
<script src="../plugins/sigma.renderers.linkurious/webgl/sigma.webgl.nodes.def.js"></script>
<script src="../plugins/sigma.renderers.linkurious/webgl/sigma.webgl.nodes.fast.js"></script>
<script src="../plugins/sigma.renderers.linkurious/webgl/sigma.webgl.edges.def.js"></script>
<script src="../plugins/sigma.renderers.linkurious/webgl/sigma.webgl.edges.fast.js"></script>
<script src="../plugins/sigma.renderers.linkurious/webgl/sigma.webgl.edges.arrow.js"></script>
<script src="../plugins/sigma.renderers.linkurious/canvas/sigma.canvas.labels.def.js"></script>
<script src="../plugins/sigma.renderers.linkurious/canvas/sigma.canvas.hovers.def.js"></script>
<script src="../plugins/sigma.renderers.linkurious/canvas/sigma.canvas.nodes.def.js"></script>
<script src="../plugins/sigma.renderers.linkurious/canvas/sigma.canvas.nodes.cross.js"></script>
<script src="../plugins/sigma.renderers.linkurious/canvas/sigma.canvas.nodes.diamond.js"></script>
<script src="../plugins/sigma.renderers.linkurious/canvas/sigma.canvas.nodes.equilateral.js"></script>
<script src="../plugins/sigma.renderers.linkurious/canvas/sigma.canvas.nodes.square.js"></script>
<script src="../plugins/sigma.renderers.linkurious/canvas/sigma.canvas.nodes.star.js"></script>
<script src="../plugins/sigma.renderers.linkurious/canvas/sigma.canvas.edges.def.js"></script>
<script src="../plugins/sigma.renderers.linkurious/canvas/sigma.canvas.edges.curve.js"></script>
<script src="../plugins/sigma.renderers.linkurious/canvas/sigma.canvas.edges.arrow.js"></script>
<script src="../plugins/sigma.renderers.linkurious/canvas/sigma.canvas.edges.curvedArrow.js"></script>

<script src="../plugins/sigma.renderers.customEdgeShapes/sigma.canvas.edges.dashed.js"></script>
<script src="../plugins/sigma.renderers.customEdgeShapes/sigma.canvas.edges.dotted.js"></script>
<script src="../plugins/sigma.renderers.customEdgeShapes/sigma.canvas.edges.parallel.js"></script>
<script src="../plugins/sigma.renderers.customEdgeShapes/sigma.canvas.edges.tapered.js"></script>
<script src="../plugins/sigma.renderers.customEdgeShapes/sigma.canvas.edgehovers.dashed.js"></script>
<script src="../plugins/sigma.renderers.customEdgeShapes/sigma.canvas.edgehovers.dotted.js"></script>
<script src="../plugins/sigma.renderers.customEdgeShapes/sigma.canvas.edgehovers.parallel.js"></script>
<script src="../plugins/sigma.renderers.customEdgeShapes/sigma.canvas.edgehovers.tapered.js"></script>

<i class="fa fa-camera-retro fa-1x" style="color: rgba(0,0,0,0);"></i>

<div id="container">
  <style>
    #graph-container { top: 0; bottom: 0; left: 0; right: 0; position: absolute; }
  </style>
  <div id="graph-container"></div>
</div>
<script>
  // Create a custom color palette:
  var myPalette = {
    schemes: {
      categoryScheme: {
        'Man': '#7fc97f',
        'Woman': '#fdc086',
        'Martian': '#798345',
        'Thing': '#925647',
        'Unknown': '#1188AA'
      },
      nameScheme: {
        'Lorem ipsum': {
          font: 'FontAwesome',
          scale: 1.0,
          color: '#000',
          content: "\uF11a"
        },
        'Dolor': {
          font: 'FontAwesome',
          scale: 1.0,
          color: '#d22',
          content: "\uF11b"
        },
        'Sit Amet': {
          font: 'FontAwesome',
          scale: 1.0,
          color: '#2d2',
          content: "\uF11c"
        },
        'Consectetur': {
          font: 'FontAwesome',
          scale: 1.0,
          color: '#22d',
          content: "\uF11d"
        }
      },
      relationTypeScheme: {
        'Love': '#81A4E3',
        'Hatred': '#CC2323'
      },
      interestScheme: {
        'Books': 'equilateral',
        'Movies': 'star',
        'Music': 'square',
        'Video games': 'diamond',
        'Nothing': 'cross',
        'BDSM': 'cross'
      },
      relationDurationScheme: {
        'Amazing': 'parallel',
        'Good': 'arrow',
        'Quite good but not that much': 'curve',
        'Not really good': 'curvedArrow',
        'Bad': 'dashed',
        'Really bad': 'dotted',
        'In ruins': 'tapered'
      },
      meetingFrequencyScheme: {
        7: ['#132b43', '#1d3f5d', '#27547a', '#326896', '#3d7fb5', '#4897d4', '#54aef3']
      }
    }
  };

  var i,
    s,
    N = 50,
    E = 50,
    g = {
      nodes:[],
      edges:[]
    };

  function randomValue(values) {
    return values[Math.floor(Math.random() * values.length)];
  }

  for (i = 0; i < N; i++)
    g.nodes.push({
      id: i,
      label: 'Node ' + i,
      x: Math.random() * 0.9,
      y: Math.random() * 0.9,
      size: 1,
      data: {
        properties: {
          family_name_abc: randomValue(['Lorem ipsum', 'Dolor', 'Sit Amet', 'Consectetur']),
          age: Math.random() * 20,
          interest: randomValue(['Books', 'Movies', 'Music', 'Video games', 'Nothing'])
        },
        categories: {
          '0': randomValue(['Man', 'Woman', 'Martian', 'Thing', 'Unknown'])
        }
      }
    });

  for (i = 0; i < E; i++)
    g.edges.push({
      id: i,
      source: Math.floor(Math.random() * N),
      target: Math.floor(Math.random() * N),
      size: 1,
      data: {
        properties: {
          relation_strength: Math.ceil(Math.random() * 100),
          relation_type: randomValue(['Love, Hatred']),
          relation_quality: randomValue(['Amazing', 'Good', 'Quite good but not that much', 'Not really good', 'Bad', 'Really bad', 'In ruins']),
          meeting_frequency: Math.ceil(Math.random() * 100000000)
        }
      }
    });

  var myStyles = {
    nodes: {
      label: {
        by: 'id',
        format: function (value) {
          return '#' + value;
        }
      },
//      size: {
//        by: 'data.properties.age',
//        bins: 7,
//        min: 3,
//        max: 15
//      },
//      color: {
//        by: 'data.categories.0',
//        scheme: 'schemes.categoryScheme'
//      },
      icon: {
        by: 'data.properties.family_name_abc',
        scheme: 'schemes.nameScheme'
      },
      type: {
        by: 'data.properties.interest',
        scheme: 'schemes.interestScheme'
      }
    },
    edges: {
//      color: {
//        by: 'data.properties.relation_type',
//        scheme: 'relationTypeScheme'
//      },
      color: {
        by: 'data.properties.meeting_frequency',
        scheme: 'schemes.meetingFrequencyScheme',
        bins: 7
      },
      size: {
        by: 'data.properties.relation_strength',
        bins: 7,
        min: 1,
        max: 10
      },
      type: {
        by: 'data.properties.relation_quality',
        scheme: 'schemes.relationDurationScheme'
      }
    }
  };

  s = new sigma({
    graph: g,
    renderer: {
      container: document.getElementById('graph-container'),
      type: 'canvas'
    },
    settings: {
      labelThreshold:1,
      edgeColor:'default'
    }
  });

  var design = sigma.plugins.design(s, {
    styles: myStyles,
    palette: myPalette
  });

  design.apply();


  var legendPlugin, textWidget, nodeIconWidget;

  function init() {
    legendPlugin = sigma.plugins.legend(s, true);
//    legendPlugin.removeAllWidgets();
    legendPlugin.setExternalCSS(['http://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css']);
    //legendPlugin.setPlacement('right');
    //legendPlugin.addWidget('edge', 'size').setUnit('%');
//    textWidget = legendPlugin.addTextWidget('some text');
//    textWidget.setText('Lorem ipsum dolor sit amet, consectetur adipiscing elit. In varius ante ac orci ullamcorper porttitor. Curabitur euismod, arcu quis eleifend faucibus, tellus urna hendrerit enim, sit amet lacinia felis massa quis nibh.');
    //legendPlugin.setVisibility(false);
    //legendPlugin.exportPng();

//    setTimeout(function () { legendPlugin.exportSvg(); }, 500);
  }

  // In case the WebGL renderer is used, we must wait for FontAwesome to be loaded.
  // http://www.w3.org/TR/css-font-loading/
  if (document.fonts) {
    // document.fonts.ready() method is going to be replaced with
    // document.fonts.ready attribute in the future.
    var fontsReady = document.fonts.ready;
    if (typeof(fontsReady) == "function") {
      fontsReady = document.fonts.ready();
    }
    fontsReady.then(init);
  }
  else {
    // wait or use a polyfill such as:
    // https://github.com/zachleat/fontfaceonload
    // https://github.com/smnh/FontLoader
    setTimeout(init, 2000);
  }

</script>