(function(a){"use strict";function b(){f=Object.create(null),g=Object.create(null),h=0,i=0}function c(){null!==j&&l&&j.dispatchEvent("activeNodes")}function d(){null!==j&&l&&j.dispatchEvent("activeEdges")}function e(a){j=this,k=a.graph,null===f&&(f=Object.create(null),h=0,k.nodes().forEach(function(a){a.active&&(f[a.id]=a,h++)})),null===g&&(g=Object.create(null),i=0,k.edges().forEach(function(a){a.active&&(g[a.id]=a,i++)})),sigma.classes.dispatcher.extend(this),a.bind("kill",function(){j.kill()})}if("undefined"==typeof sigma)throw new Error("sigma is not declared");sigma.utils.pkg("sigma.plugins");var f,g,h,i,j=null,k=null,l=!0;b(),sigma.classes.graph.attach("addNode","sigma.plugins.activeState.addNode",function(a){a.active&&(f[a.id]=this.nodesIndex[a.id],h++,c())}),sigma.classes.graph.attach("addEdge","sigma.plugins.activeState.addEdge",function(a){a.active&&(g[a.id]=this.edgesIndex[a.id],d())}),sigma.classes.graph.attachBefore("dropNode","sigma.plugins.activeState.dropNode",function(b){this.nodesIndex[b]!==a&&this.nodesIndex[b].active&&(delete f[b],h--,c())}),sigma.classes.graph.attachBefore("dropEdge","sigma.plugins.activeState.dropEdge",function(b){this.edgesIndex[b]!==a&&this.edgesIndex[b].active&&(delete g[b],i--,d())}),sigma.classes.graph.attachBefore("clear","sigma.plugins.activeState.clear",b),e.prototype.kill=function(){this.unbind(),f=null,g=null,h=0,i=0,k=null,j=null},e.prototype.addNodes=function(a){var b,d=h;if(arguments.length||k.nodes().forEach(function(a){a.hidden||(a.active=!0,f[a.id]=a)}),arguments.length>1)throw new TypeError("Too many arguments. Use an array instead.");if("string"==typeof a||"number"==typeof a)b=k.nodes(a),b.hidden||(b.active=!0,f[a]=b);else if(Array.isArray(a)){var e,g;for(e=0,g=a.length;g>e;e++){if("string"!=typeof a[e]&&"number"!=typeof a[e])throw new TypeError("Invalid argument: a node id is not a string or a number, was "+a[e]);b=k.nodes(a[e]),b.hidden||(b.active=!0,f[a[e]]=b)}}return h=Object.keys(f).length,d!=h&&c(),this},e.prototype.addEdges=function(a){var b,c=i;if(arguments.length||k.edges().forEach(function(a){a.hidden||(a.active=!0,g[a.id]=a)}),arguments.length>1)throw new TypeError("Too many arguments. Use an array instead.");if("string"==typeof a||"number"==typeof a)b=k.edges(a),b.hidden||(b.active=!0,g[a]=b);else if(Array.isArray(a)){var e,f;for(e=0,f=a.length;f>e;e++){if("string"!=typeof a[e]&&"number"!=typeof a[e])throw new TypeError("Invalid argument: an edge id is not a string or a number, was "+a[e]);b=k.edges(a[e]),b.hidden||(b.active=!0,g[a[e]]=b)}}return i=Object.keys(g).length,c!=i&&d(),this},e.prototype.dropNodes=function(a){var b=h;if(arguments.length||k.nodes().forEach(function(a){a.active=!1,delete f[a.id]}),arguments.length>1)throw new TypeError("Too many arguments. Use an array instead.");if("string"==typeof a||"number"==typeof a)k.nodes(a).active=!1,delete f[a];else if(Array.isArray(a)){var d,e;for(d=0,e=a.length;e>d;d++){if("string"!=typeof a[d]&&"number"!=typeof a[d])throw new TypeError("Invalid argument: a node id is not a string or a number, was "+a[d]);k.nodes(a[d]).active=!1,delete f[a[d]]}}return h=Object.keys(f).length,b!=h&&c(),this},e.prototype.dropEdges=function(a){var b=i;if(arguments.length||k.edges().forEach(function(a){a.active=!1,delete g[a.id]}),arguments.length>1)throw new TypeError("Too many arguments. Use an array instead.");if("string"==typeof a||"number"==typeof a)k.edges(a).active=!1,delete g[a];else if(Array.isArray(a)){var c,e;for(c=0,e=a.length;e>c;c++){if("string"!=typeof a[c]&&"number"!=typeof a[c])throw new TypeError("Invalid argument: an edge id is not a string or a number, was "+a[c]);k.edges(a[c]).active=!1,delete g[a[c]]}}return i=Object.keys(g).length,b!=i&&d(),this},e.prototype.addNeighbors=function(){if(!("adjacentNodes"in k))throw new Error("Missing method graph.adjacentNodes");var a,b;if(a=Object.keys(f),a.length){for(b in f)k.adjacentNodes(b).forEach(function(b){b.hidden||a.push(b.id)});l=!1,this.dropNodes().dropEdges(),l=!0,this.addNodes(a)}return this},e.prototype.setNodesBy=function(a){var b=[];return k.nodes().forEach(function(c){a.call(k,c)&&(c.hidden||b.push(c.id))}),l=!1,this.dropNodes(),l=!0,this.addNodes(b),this},e.prototype.setEdgesBy=function(a){var b=[];return k.edges().forEach(function(c){a.call(k,c)&&(c.hidden||b.push(c.id))}),l=!1,this.dropEdges(),l=!0,this.addEdges(b),this},e.prototype.invertNodes=function(){var a=k.nodes().filter(function(a){return!a.hidden&&!a.active}).map(function(a){return a.id});return l=!1,this.dropNodes(),l=!0,a.length?this.addNodes(a):c(),this},e.prototype.invertEdges=function(){var a=k.edges().filter(function(a){return!a.hidden&&!a.active}).map(function(a){return a.id});return l=!1,this.dropEdges(),l=!0,a.length?this.addEdges(a):d(),this},e.prototype.nodes=function(){var a,b=[];for(a in f)b.push(f[a]);return b},e.prototype.edges=function(){var a,b=[];for(a in g)b.push(g[a]);return b},sigma.plugins.activeState=function(a){return j||(j=new e(a)),j},sigma.plugins.killActiveState=function(){j instanceof e&&(j.kill(),j=null)}}).call(this);
//# sourceMappingURL=sigma.plugins.activeState.min.js.map