(function(a){"use strict";function b(a,b){var c=a?a.length:0;if(!c)return[];var d=-1,e=[],f=b.length;a:for(;++d<c;){var g=a[d];if(g===g){for(var h=f;h--;)if(b[h]===g)continue a;e.push(g)}else b.indexOf(g)<0&&e.push(g)}return e}function c(a){i=32===a.which,g.removeEventListener("keydown",c,!1),g.addEventListener("keyup",d,!1)}function d(a){i=!1,g.addEventListener("keydown",c,!1),g.removeEventListener("keyup",d,!1)}function e(a,d,e){function f(){d.dropEdges(),d.nodes().length===a.graph.nodes().length?d.dropNodes():d.addNodes(),a.refresh({skipIndexation:!0})}function k(){v++}function l(){v=0,u.container.lastChild.addEventListener("mousemove",k)}function m(){setTimeout(function(){v=0;var a=d.nodes()[0];a&&null===h&&(h=a.id)},1),u.container.lastChild.removeEventListener("mousemove",k)}function n(){d.dropEdges(),d.dropNodes(),a.refresh({skipIndexation:!0})}function o(){var b=d.nodes().map(function(a){return a.id}),c=d.edges().map(function(a){return a.id});d.dropEdges(c),d.dropNodes(b),b.length==a.graph.nodes().length?a.graph.clear():(a.graph.dropEdges(c),a.graph.dropNodes(b)),a.refresh()}function p(){d.addNeighbors(),a.refresh({skipIndexation:!0})}function q(){d.dropEdges(),d.setNodesBy(function(b){return 0===a.graph.degree(b.id)}),a.refresh({skipIndexation:!0})}function r(){d.dropEdges(),d.setNodesBy(function(b){return 1===a.graph.adjacentNodes(b.id).length}),a.refresh({skipIndexation:!0})}function s(a){var b=a.data;b.length?(d.dropEdges(),d.addNodes(b.map(function(a){return a.id})),h=d.nodes()[0].id):(d.dropNodes(),h=null)}var t=this,u=e||a.renderers[0],v=0,w=null,x=null;g=g||document.getElementsByTagName("body")[0],u.container.lastChild.addEventListener("mousedown",l),u.container.lastChild.addEventListener("mouseup",m),this.init=function(){var a=d.nodes();a.length&&(h=a[0].id)},this.clickNodesHandler=function(c){if(!(v>1)){var e=c.data.node.map(function(a){return a.id}),f=d.nodes().map(function(a){return a.id}),g=b(e,f);if(d.dropEdges(),i){var k=b(e,g);d.dropNodes(k)}else{f.length>1&&d.addNodes(e);var l=d.nodes()[0];null!=l&&(h===l.id?g.length?(d.dropNodes(),h=null):setTimeout(function(){j||(d.dropNodes(),h=null,a.refresh({skipIndexation:!0}))},a.settings("doubleClickTimeout")):h=l.id)}d.addNodes(g),a.refresh({skipIndexation:!0})}},this.doubleClickNodesHandler=function(b){j=!0,setTimeout(function(){j=!1},100+a.settings("doubleClickTimeout"))},this.clickEdgesHandler=function(c){if(!(v>1)){var e=c.data.edge.map(function(a){return a.id}),f=d.edges().map(function(a){return a.id}),g=b(e,f);if(d.dropNodes(),i){var h=b(e,g);d.dropEdges(h)}else d.dropEdges(),f.length>1&&d.addEdges(e);d.addEdges(g),a.refresh({skipIndexation:!0})}},a.bind("clickNodes",this.clickNodesHandler),a.bind("doubleClickNodes",this.doubleClickNodesHandler),a.bind("clickEdges",this.clickEdgesHandler),g.addEventListener("keydown",c,!1),this.bindKeyboard=function(a){if(!a)throw new Error('Missing argument: "keyboard"');return w=a,w.bind("32+65 18+32+65",f),w.bind("32+85 18+32+85",n),w.bind("32+46 18+32+46",o),w.bind("32+69 18+32+69",p),w.bind("32+73 18+32+73",q),w.bind("32+76 18+32+76",r),this},this.unbindKeyboard=function(){return w&&(w.unbind("32+65 18+32+65",f),w.unbind("32+85 18+32+85",n),w.unbind("32+46 18+32+46",o),w.unbind("32+69 18+32+69",p),w.unbind("32+73 18+32+73",q),w.unbind("32+76 18+32+76",r),w=null),this},this.bindLasso=function(a){if(!a)throw new Error('Missing argument: "lassoInstance"');x=a,x.bind("selectedNodes",s)},this.unbindLasso=function(){x&&x.unbind("selectedNodes",s)},this.clear=function(){a.unbind("clickNodes",t.clickNodesHandler),a.unbind("doubleClickNodes",t.doubleClickNodesHandler),a.unbind("clickEdges",t.clickEdgesHandler),t.unbindKeyboard(),t.unbindLasso(),u.container.lastChild.removeEventListener("mousedown",l),u.container.lastChild.removeEventListener("mouseup",m),u.container.lastChild.removeEventListener("mousemove",k),u=null,w=null}}if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var f={},g=null,h=null,i=!1,j=!1;sigma.plugins.select=function(a,b,c){return f[a.id]||(f[a.id]=new e(a,b),a.bind("kill",function(){sigma.plugins.killSelect(a)})),f[a.id]},sigma.plugins.killSelect=function(a){f[a.id]instanceof e&&(f[a.id].clear(),delete f[a.id]),!f.length&&g&&(g.removeEventListener("keydown",c,!1),g.removeEventListener("keyup",d,!1),g=null)}}).call(this);
//# sourceMappingURL=sigma.plugins.select.min.js.map